[tox]
envlist =
    py{310}-dj{32,42}
    py{311}-dj{42,50}
    py{312}-dj{42,51,52}
    py{313}-dj{51,52}
    lint
skip_missing_interpreters = true

[testenv]
deps =
    dj32: Django>=3.2,<4.0
    dj42: Django>=4.2,<5.0
    dj50: Django>=5.0,<5.1
    dj51: Django>=5.1,<5.2
    dj52: Django>=5.2,<6.0
    pytest-runner
    requests-mock
    pytest-django
changedir = {toxinidir}
setenv =
    PYTHONPATH = {toxinidir}
commands =
    pytest tests/ -v {posargs}

[testenv:lint]
deps =
    ruff
changedir = {toxinidir}
commands =
    ruff check --fix --exit-non-zero-on-fix .
